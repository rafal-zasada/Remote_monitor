Version 4
SHEET 1 4024 696
WIRE 1456 -1504 1120 -1504
WIRE 1952 -1504 1536 -1504
WIRE 1120 -1264 1120 -1504
WIRE 2496 -1072 2496 -1136
WIRE 2496 -1072 2336 -1072
WIRE 2704 -1072 2496 -1072
WIRE 2944 -1072 2704 -1072
WIRE 1456 -1040 1328 -1040
WIRE 1792 -1040 1536 -1040
WIRE 1952 -1040 1792 -1040
WIRE 2704 -1024 2704 -1072
WIRE 2704 -1024 2656 -1024
WIRE 2944 -1024 2944 -1072
WIRE 2944 -1024 2880 -1024
WIRE 2576 -1008 2576 -1024
WIRE 2704 -976 2704 -1024
WIRE 2880 -976 2880 -1024
WIRE 2944 -976 2944 -1024
WIRE 2656 -960 2656 -1024
WIRE 1792 -928 1792 -1040
WIRE 1952 -928 1952 -1040
WIRE 2064 -928 1952 -928
WIRE 1952 -880 1952 -928
WIRE 2576 -880 2576 -928
WIRE 2656 -880 2656 -896
WIRE 2704 -880 2704 -896
WIRE 2704 -880 2656 -880
WIRE 3232 -880 2704 -880
WIRE 3440 -880 3232 -880
WIRE 2064 -864 2064 -928
WIRE 3440 -864 3440 -880
WIRE 2880 -848 2880 -912
WIRE 2944 -848 2944 -896
WIRE 2944 -848 2880 -848
WIRE 2704 -832 2704 -880
WIRE 2704 -832 2656 -832
WIRE 1328 -816 1328 -1040
WIRE 2336 -816 2336 -1072
WIRE 2336 -816 2192 -816
WIRE 2704 -816 2704 -832
WIRE 2944 -816 2944 -848
WIRE 2944 -816 2880 -816
WIRE 3136 -816 3136 -832
WIRE 3136 -816 2944 -816
WIRE 3328 -816 3136 -816
WIRE 2656 -800 2656 -832
WIRE 2880 -800 2880 -816
WIRE 2192 -768 2192 -816
WIRE 2240 -768 2192 -768
WIRE 2336 -752 2336 -816
WIRE 2336 -752 2304 -752
WIRE 1952 -736 1952 -800
WIRE 2064 -736 2064 -800
WIRE 2064 -736 1952 -736
WIRE 2176 -736 2064 -736
WIRE 2240 -736 2176 -736
WIRE 1952 -720 1952 -736
WIRE 2064 -720 2064 -736
WIRE 2656 -720 2656 -736
WIRE 2704 -720 2704 -736
WIRE 2704 -720 2656 -720
WIRE 2880 -720 2880 -736
WIRE 2944 -720 2944 -736
WIRE 2944 -720 2880 -720
WIRE 1792 -704 1792 -864
WIRE 2544 -704 2416 -704
WIRE 2624 -704 2544 -704
WIRE 2544 -688 2544 -704
WIRE 3328 -688 3328 -816
WIRE 3568 -688 3328 -688
WIRE 2416 -656 2416 -704
WIRE 3136 -640 3136 -816
WIRE 3232 -640 3232 -880
WIRE 2176 -624 2176 -736
WIRE 2544 -608 2544 -624
WIRE 2624 -608 2624 -624
WIRE 2624 -608 2544 -608
WIRE 2944 -608 2944 -720
WIRE 2944 -608 2624 -608
WIRE 1952 -592 1952 -640
WIRE 2064 -592 2064 -656
WIRE 2064 -592 1952 -592
WIRE 2624 -592 2624 -608
WIRE 2544 -576 2544 -608
WIRE 2544 -512 2480 -512
WIRE 2624 -496 2624 -512
WIRE 2624 -496 2592 -496
WIRE 2704 -496 2704 -720
WIRE 2704 -496 2624 -496
WIRE 2592 -464 2592 -496
WIRE 2592 -464 2544 -464
WIRE 2624 -464 2624 -496
WIRE 1120 -352 1120 -1184
WIRE 1328 -352 1328 -736
WIRE 1328 -352 1120 -352
WIRE 1792 -352 1792 -640
WIRE 1792 -352 1328 -352
WIRE 2064 -352 2064 -592
WIRE 2064 -352 1792 -352
WIRE 2176 -352 2176 -560
WIRE 2176 -352 2064 -352
WIRE 2416 -352 2416 -576
WIRE 2416 -352 2176 -352
WIRE 2480 -352 2480 -512
WIRE 2480 -352 2416 -352
WIRE 2544 -352 2544 -400
WIRE 2544 -352 2480 -352
WIRE 2624 -352 2624 -384
WIRE 2624 -352 2544 -352
WIRE 3136 -352 3136 -576
WIRE 3136 -352 2624 -352
WIRE 3232 -352 3232 -576
WIRE 3232 -352 3136 -352
WIRE -272 -272 -384 -272
WIRE -96 -272 -192 -272
WIRE 48 -272 -16 -272
WIRE 208 -272 208 -352
WIRE 208 -272 48 -272
WIRE 2064 -256 2064 -352
WIRE 208 -224 208 -272
WIRE 336 -224 208 -224
WIRE 208 -176 208 -224
WIRE 336 -160 336 -224
WIRE 48 -112 48 -272
WIRE 336 -96 320 -96
WIRE 208 -64 208 -96
WIRE 336 -64 336 -96
WIRE 336 -64 208 -64
WIRE 208 -16 208 -64
WIRE 560 -16 208 -16
WIRE 784 -16 560 -16
WIRE 208 32 208 -16
WIRE 336 32 208 32
WIRE 208 48 208 32
WIRE 336 64 336 32
WIRE 48 144 48 -48
WIRE 560 160 560 -16
WIRE 208 176 208 128
WIRE 336 176 336 128
WIRE 336 176 208 176
WIRE 208 208 208 176
WIRE -384 464 -384 -272
WIRE 48 464 48 208
WIRE 48 464 -384 464
WIRE 208 464 208 288
WIRE 208 464 48 464
WIRE 384 464 208 464
WIRE 560 464 560 224
WIRE 560 464 384 464
WIRE 384 512 384 464
FLAG 384 512 0
FLAG 208 -352 Input
FLAG 784 -16 ADC_STM32
FLAG 3440 -880 ADC_high_range
FLAG 2064 -256 0
FLAG 3568 -688 ADC_low_range
FLAG 2496 -1136 op_amp_output
FLAG 2576 -880 0
DATAFLAG 2800 -608 ""
SYMBOL res 192 -192 R0
SYMATTR InstName R3
SYMATTR Value 950k
SYMBOL res 192 32 R0
SYMATTR InstName R4
SYMATTR Value 50k
SYMBOL LTspiceXVII_2019Jan29\\LTspiceXVII\\lib\\sym\\voltage -176 -272 R90
WINDOW 123 0 0 Left 0
WINDOW 39 24 44 Left 2
SYMATTR SpiceLine Rser=0
SYMATTR InstName V3
SYMATTR Value PULSE(0 10 0 0 0 10us 20us)
SYMBOL LTspiceXVII_2019Jan29\\LTspiceXVII\\lib\\sym\\voltage 208 192 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=0
SYMATTR InstName V4
SYMATTR Value 1.024
SYMBOL cap 544 160 R0
SYMATTR InstName C1
SYMATTR Value 5p
SYMBOL cap 320 -160 R0
SYMATTR InstName C2
SYMATTR Value 5p
SYMBOL cap 320 64 R0
SYMATTR InstName C3
SYMATTR Value 90p
SYMBOL res 0 -288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL LTspiceXVII_2019Jan29\\LTspiceXVII\\lib\\sym\\zener 32 -112 R0
SYMATTR InstName D1
SYMATTR Value KDZ12B
SYMBOL LTspiceXVII_2019Jan29\\LTspiceXVII\\lib\\sym\\zener 64 208 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value KDZ12B
SYMBOL res 1936 -896 R0
SYMATTR InstName R6
SYMATTR Value 800k
SYMBOL res 1936 -736 R0
SYMATTR InstName R7
SYMATTR Value 200k
SYMBOL res 2688 -992 R0
SYMATTR InstName R8
SYMATTR Value 800k
SYMBOL res 2688 -832 R0
SYMATTR InstName R9
SYMATTR Value 20k
SYMBOL res 2928 -992 R0
SYMATTR InstName R10
SYMATTR Value 400k
SYMBOL res 2928 -832 R0
SYMATTR InstName R11
SYMATTR Value 400k
SYMBOL cap 2048 -864 R0
SYMATTR InstName C4
SYMATTR Value 10n
SYMBOL cap 2048 -720 R0
SYMATTR InstName C5
SYMATTR Value 40n
SYMBOL LTspiceXVII_2019Jan29\\LTspiceXVII\\lib\\sym\\zener 1776 -928 R0
SYMATTR InstName D2
SYMATTR Value BZX84B22VL
SYMBOL LTspiceXVII_2019Jan29\\LTspiceXVII\\lib\\sym\\Opamps\\opamp 2272 -816 R0
SYMATTR InstName U1
SYMBOL LTspiceXVII_2019Jan29\\LTspiceXVII\\lib\\sym\\voltage 1552 -1040 R90
WINDOW 123 0 0 Left 0
WINDOW 39 24 44 Left 2
SYMATTR SpiceLine Rser=0
SYMATTR InstName V5
SYMATTR Value PULSE(0 40 1us 0 0 0.5us 1us)
SYMBOL LTspiceXVII_2019Jan29\\LTspiceXVII\\lib\\sym\\voltage 2416 -672 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=0
SYMATTR InstName V7
SYMATTR Value 1
SYMBOL LTspiceXVII_2019Jan29\\LTspiceXVII\\lib\\sym\\zener 1808 -640 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Value BZX84B22VL
SYMBOL res 2608 -720 R0
SYMATTR InstName R12
SYMATTR Value 80
SYMBOL res 2608 -608 R0
SYMATTR InstName R13
SYMATTR Value 10
SYMBOL cap 3120 -640 R0
SYMATTR InstName C6
SYMATTR Value 5p
SYMBOL cap 3216 -640 R0
SYMATTR InstName C7
SYMATTR Value 5p
SYMBOL cap 2160 -624 R0
SYMATTR InstName C12
SYMATTR Value 3p
SYMBOL voltage 1328 -832 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value PULSE(0 -20V 0.5us 0 0 1s 1s)
SYMBOL LTspiceXVII_2019Jan29\\LTspiceXVII\\lib\\sym\\voltage 1552 -1504 R90
WINDOW 123 0 0 Left 0
WINDOW 39 24 44 Left 2
SYMATTR SpiceLine Rser=0
SYMATTR InstName V1
SYMATTR Value PULSE(0 2 1us 0 0 0.5us 1us)
SYMBOL voltage 1120 -1280 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 -1 0.5us 0 0 1s 1s)
SYMBOL cap 2528 -688 R0
SYMATTR InstName C8
SYMATTR Value 100n
SYMBOL cap 2528 -576 R0
SYMATTR InstName C9
SYMATTR Value 100n
SYMBOL res 2608 -480 R0
SYMATTR InstName R1
SYMATTR Value 10
SYMBOL voltage 2576 -1024 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value -4
SYMBOL cap 2528 -464 R0
SYMATTR InstName C10
SYMATTR Value 100n
SYMBOL cap 2864 -976 R0
SYMATTR InstName C11
SYMATTR Value 20p
SYMBOL cap 2864 -800 R0
SYMATTR InstName C13
SYMATTR Value 20p
SYMBOL cap 2640 -800 R0
SYMATTR InstName C14
SYMATTR Value 800p
SYMBOL cap 2640 -960 R0
SYMATTR InstName C15
SYMATTR Value 20p
TEXT 2080 -1376 Left 2 !.tran 5E-5
TEXT 2056 -1328 Left 2 !.lib opamp.sub
TEXT 640 208 Left 2 ;STM32 pin capacitance = 5pF
TEXT -136 56 Left 2 ;Capacitance?
TEXT 2200 -896 Left 2 ;MAX4450 - 1pF input\n+/-5.5V
TEXT 2680 -1144 Left 2 ;+/-4V for high range values\n+/-200mV for low range values
TEXT 3592 -896 Left 2 ;20mV - 1687mV
TEXT 2488 -312 Left 2 ;Voltage source max load = 20 mA\n(voltage change only 0.1 mV)
TEXT 2656 -1240 Left 2 ;ADC_voltage = V_ref + ( V_op_amp_out - V_ref) * R_bottom / (R_top + R_bottom)
TEXT 2656 -1288 Left 2 ;ADC_voltage_swing = (V_op_amp_out_swing) x R_bottom / (R_bottom + R_top)
