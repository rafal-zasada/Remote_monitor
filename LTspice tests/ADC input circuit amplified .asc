Version 4
SHEET 1 5192 696
WIRE 1328 -1504 992 -1504
WIRE 1936 -1504 1408 -1504
WIRE 992 -1264 992 -1504
WIRE 2496 -1072 2496 -1136
WIRE 2496 -1072 2336 -1072
WIRE 2880 -1072 2496 -1072
WIRE 1328 -1040 1200 -1040
WIRE 1664 -1040 1408 -1040
WIRE 1936 -1040 1664 -1040
WIRE 1952 -1040 1936 -1040
WIRE 2880 -1024 2880 -1072
WIRE 1664 -928 1664 -1040
WIRE 1936 -928 1936 -1040
WIRE 1936 -928 1824 -928
WIRE 2880 -928 2880 -944
WIRE 3296 -928 2880 -928
WIRE 3392 -928 3296 -928
WIRE 3488 -928 3392 -928
WIRE 3392 -912 3392 -928
WIRE 2880 -896 2880 -928
WIRE 1824 -880 1824 -928
WIRE 1936 -864 1936 -928
WIRE 2080 -848 2048 -848
WIRE 2176 -848 2160 -848
WIRE 2208 -848 2176 -848
WIRE 2320 -848 2288 -848
WIRE 2480 -848 2416 -848
WIRE 2576 -848 2560 -848
WIRE 2624 -848 2576 -848
WIRE 2720 -848 2704 -848
WIRE 1200 -816 1200 -1040
WIRE 2176 -768 2176 -848
WIRE 2240 -768 2176 -768
WIRE 2576 -768 2576 -848
WIRE 2608 -768 2576 -768
WIRE 2320 -752 2320 -848
WIRE 2320 -752 2304 -752
WIRE 2336 -752 2336 -1072
WIRE 2336 -752 2320 -752
WIRE 2720 -752 2720 -848
WIRE 2720 -752 2672 -752
WIRE 2976 -752 2720 -752
WIRE 1824 -736 1824 -800
WIRE 1936 -736 1936 -800
WIRE 1936 -736 1824 -736
WIRE 2224 -736 1936 -736
WIRE 2240 -736 2224 -736
WIRE 2336 -736 2336 -752
WIRE 2432 -736 2336 -736
WIRE 2608 -736 2512 -736
WIRE 1824 -720 1824 -736
WIRE 1936 -720 1936 -736
WIRE 1664 -704 1664 -864
WIRE 2976 -704 2976 -752
WIRE 3488 -624 3376 -624
WIRE 2976 -608 2976 -624
WIRE 3168 -608 2976 -608
WIRE 3232 -608 3168 -608
WIRE 3376 -608 3376 -624
WIRE 3376 -608 3232 -608
WIRE 3392 -608 3376 -608
WIRE 1824 -592 1824 -640
WIRE 1936 -592 1936 -656
WIRE 1936 -592 1824 -592
WIRE 2224 -576 2224 -736
WIRE 2976 -576 2976 -608
WIRE 3168 -512 3168 -608
WIRE 3232 -512 3232 -608
WIRE 3296 -496 3296 -928
WIRE 3376 -496 3376 -608
WIRE 2880 -448 2880 -816
WIRE 2976 -448 2976 -496
WIRE 992 -352 992 -1184
WIRE 1200 -352 1200 -736
WIRE 1200 -352 992 -352
WIRE 1664 -352 1664 -640
WIRE 1664 -352 1200 -352
WIRE 1936 -352 1936 -592
WIRE 1936 -352 1664 -352
WIRE 2048 -352 2048 -848
WIRE 2048 -352 1936 -352
WIRE 2224 -352 2224 -512
WIRE 2224 -352 2048 -352
WIRE 2416 -352 2416 -848
WIRE 2416 -352 2224 -352
WIRE 2880 -352 2880 -368
WIRE 2880 -352 2416 -352
WIRE 2976 -352 2976 -368
WIRE 2976 -352 2880 -352
WIRE 3168 -352 3168 -448
WIRE 3168 -352 2976 -352
WIRE 3232 -352 3232 -448
WIRE 3232 -352 3168 -352
WIRE 3296 -352 3296 -432
WIRE 3296 -352 3232 -352
WIRE 3376 -352 3376 -432
WIRE 3376 -352 3296 -352
WIRE 3392 -352 3376 -352
WIRE -272 -272 -384 -272
WIRE -96 -272 -192 -272
WIRE 48 -272 -16 -272
WIRE 208 -272 208 -352
WIRE 208 -272 48 -272
WIRE 1936 -256 1936 -352
WIRE 208 -224 208 -272
WIRE 336 -224 208 -224
WIRE 208 -176 208 -224
WIRE 336 -160 336 -224
WIRE 48 -112 48 -272
WIRE 336 -96 320 -96
WIRE 208 -64 208 -96
WIRE 336 -64 336 -96
WIRE 336 -64 208 -64
WIRE 208 -16 208 -64
WIRE 560 -16 208 -16
WIRE 784 -16 560 -16
WIRE 208 32 208 -16
WIRE 336 32 208 32
WIRE 208 48 208 32
WIRE 336 64 336 32
WIRE 48 144 48 -48
WIRE 560 160 560 -16
WIRE 208 176 208 128
WIRE 336 176 336 128
WIRE 336 176 208 176
WIRE 208 208 208 176
WIRE -384 464 -384 -272
WIRE 48 464 48 208
WIRE 48 464 -384 464
WIRE 208 464 208 288
WIRE 208 464 48 464
WIRE 384 464 208 464
WIRE 560 464 560 224
WIRE 560 464 384 464
WIRE 384 512 384 464
FLAG 384 512 0
FLAG 208 -352 Input
FLAG 784 -16 ADC_STM32
FLAG 1936 -256 0
FLAG 2496 -1136 op_amp_output
FLAG 3488 -928 high_range
FLAG 3488 -624 low_range
SYMBOL res 192 -192 R0
SYMATTR InstName R3
SYMATTR Value 950k
SYMBOL res 192 32 R0
SYMATTR InstName R4
SYMATTR Value 50k
SYMBOL LTspiceXVII_2019Jan29\\LTspiceXVII\\lib\\sym\\voltage -176 -272 R90
WINDOW 123 0 0 Left 0
WINDOW 39 24 44 Left 2
SYMATTR SpiceLine Rser=0
SYMATTR InstName V3
SYMATTR Value PULSE(0 10 0 0 0 10us 20us)
SYMBOL LTspiceXVII_2019Jan29\\LTspiceXVII\\lib\\sym\\voltage 208 192 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=0
SYMATTR InstName V4
SYMATTR Value 1.024
SYMBOL cap 544 160 R0
SYMATTR InstName C1
SYMATTR Value 5p
SYMBOL cap 320 -160 R0
SYMATTR InstName C2
SYMATTR Value 5p
SYMBOL cap 320 64 R0
SYMATTR InstName C3
SYMATTR Value 90p
SYMBOL res 0 -288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL LTspiceXVII_2019Jan29\\LTspiceXVII\\lib\\sym\\zener 32 -112 R0
SYMATTR InstName D1
SYMATTR Value KDZ12B
SYMBOL LTspiceXVII_2019Jan29\\LTspiceXVII\\lib\\sym\\zener 64 208 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value KDZ12B
SYMBOL res 1808 -896 R0
SYMATTR InstName R6
SYMATTR Value 800k
SYMBOL res 1808 -736 R0
SYMATTR InstName R7
SYMATTR Value 200k
SYMBOL cap 1920 -864 R0
SYMATTR InstName C4
SYMATTR Value 10p
SYMBOL cap 1920 -720 R0
SYMATTR InstName C5
SYMATTR Value 37p
SYMBOL LTspiceXVII_2019Jan29\\LTspiceXVII\\lib\\sym\\zener 1648 -928 R0
SYMATTR InstName D2
SYMATTR Value UDZV18B
SYMBOL LTspiceXVII_2019Jan29\\LTspiceXVII\\lib\\sym\\Opamps\\opamp 2272 -816 R0
SYMATTR InstName U1
SYMBOL LTspiceXVII_2019Jan29\\LTspiceXVII\\lib\\sym\\voltage 1424 -1040 R90
WINDOW 123 0 0 Left 0
WINDOW 39 24 44 Left 2
SYMATTR SpiceLine Rser=0
SYMATTR InstName V5
SYMATTR Value PULSE(0 36 1us 0 0 2us 4us)
SYMBOL LTspiceXVII_2019Jan29\\LTspiceXVII\\lib\\sym\\voltage 2976 -464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=0
SYMATTR InstName V7
SYMATTR Value 3v
SYMBOL LTspiceXVII_2019Jan29\\LTspiceXVII\\lib\\sym\\zener 1680 -640 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Value UDZV18B
SYMBOL cap 2208 -576 R0
SYMATTR InstName C12
SYMATTR Value 3p
SYMBOL voltage 1200 -832 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value PULSE(0 -18V 0.5us 0 0 1s 1s)
SYMBOL LTspiceXVII_2019Jan29\\LTspiceXVII\\lib\\sym\\voltage 1424 -1504 R90
WINDOW 123 0 0 Left 0
WINDOW 39 24 44 Left 2
SYMATTR SpiceLine Rser=0
SYMATTR InstName V1
SYMATTR Value PULSE(0 2 1us 0 0 2us 4us)
SYMBOL voltage 992 -1280 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 -1 0.5us 0 0 1s 1s)
SYMBOL LTspiceXVII_2019Jan29\\LTspiceXVII\\lib\\sym\\Opamps\\opamp 2640 -816 R0
SYMATTR InstName U2
SYMBOL res 2720 -864 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 900
SYMBOL res 2576 -864 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 100
SYMBOL res 2528 -752 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 100
SYMBOL res 2960 -720 R0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res 2960 -592 R0
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL res 2864 -1040 R0
SYMATTR InstName R11
SYMATTR Value 7.7k
SYMBOL res 2864 -912 R0
SYMATTR InstName R12
SYMATTR Value 2.7k
SYMBOL LTspiceXVII_2019Jan29\\LTspiceXVII\\lib\\sym\\voltage 2880 -464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=0
SYMATTR InstName V8
SYMATTR Value 2
SYMBOL res 2304 -864 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 200
SYMBOL res 2176 -864 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 400
SYMBOL cap 3360 -496 R0
SYMATTR InstName C6
SYMATTR Value 5p
SYMBOL cap 3280 -496 R0
SYMATTR InstName C7
SYMATTR Value 5p
SYMBOL zener 3184 -448 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D5
SYMATTR Value 1N750
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 3248 -448 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D6
SYMATTR Value RB530VM-30
SYMATTR Description Diode
SYMATTR Type diode
TEXT 2080 -1376 Left 2 !.tran 3E-5
TEXT 2056 -1328 Left 2 !.lib opamp.sub
TEXT 640 208 Left 2 ;STM32 pin capacitance = 5pF
TEXT -136 56 Left 2 ;Capacitance?
TEXT 2216 -976 Left 2 ;MAX4450 - 1pF input\n+/-5.5V
TEXT 2744 -1208 Left 2 ;ADC_voltage = V_ref + ( V_op_amp_out - V_ref) * R_bottom / (R_top + R_bottom)
TEXT 2744 -1256 Left 2 ;ADC_voltage_swing = (V_op_amp_out_swing) x R_bottom / (R_bottom + R_top)
TEXT 2624 -488 Left 2 ;Voltage references \nsink/source capable.
TEXT 3112 -328 Left 2 ;3.3V zener
TEXT 3168 -288 Left 2 ;low forward\ndrop diode
TEXT 1560 -1072 Left 2 ;+/-18V
